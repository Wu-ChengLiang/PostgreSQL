<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>名医堂管理后台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/style-enhanced.css">
    <link rel="stylesheet" href="css/elderly-friendly.css">
</head>
<body>
    <!-- 登录页面 -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <h1>名医堂管理后台</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">用户名</label>
                    <input type="text" id="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">登录</button>
            </form>
            <p class="login-tip">默认账号：admin / admin123</p>
        </div>
    </div>

    <!-- 管理界面 -->
    <div id="adminPage" style="display: none;">
        <!-- 顶部导航 -->
        <nav class="admin-navbar">
            <div class="container">
                <div class="nav-brand">
                    <h1>名医堂管理后台</h1>
                </div>
                <div class="nav-right">
                    <span id="adminInfo"></span>
                    <button class="btn btn-logout" onclick="logout()">退出登录</button>
                </div>
            </div>
        </nav>

        <!-- 侧边栏 -->
        <div class="admin-layout">
            <aside class="sidebar">
                <ul class="menu">
                    <li><a href="#dashboard" onclick="handleMenuClick(event, 'dashboard')" class="active">数据概览</a></li>
                    <li><a href="#members" onclick="handleMenuClick(event, 'members')">会员管理</a></li>
                    <li><a href="#medical" onclick="handleMenuClick(event, 'medical')">病历管理</a></li>
                    <li><a href="#therapists" onclick="handleMenuClick(event, 'therapists')">技师管理</a></li>
                    <li><a href="#appointments" onclick="handleMenuClick(event, 'appointments')">预约管理</a></li>
                    <li><a href="#stores" onclick="handleMenuClick(event, 'stores')">门店管理</a></li>
                    <li><a href="#statistics" onclick="handleMenuClick(event, 'statistics')">统计报表</a></li>
                </ul>
            </aside>

            <!-- 主内容区 -->
            <main class="admin-content">
                <!-- 数据概览 -->
                <section id="dashboardSection" class="content-section">
                    <h2>数据概览</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>今日预约</h3>
                            <div class="stat-number" id="todayAppointments">-</div>
                        </div>
                        <div class="stat-card">
                            <h3>本周预约</h3>
                            <div class="stat-number" id="weekAppointments">-</div>
                        </div>
                        <div class="stat-card">
                            <h3>在职技师</h3>
                            <div class="stat-number" id="activeTherapists">-</div>
                        </div>
                        <div class="stat-card">
                            <h3>门店数量</h3>
                            <div class="stat-number" id="totalStores">-</div>
                        </div>
                    </div>
                </section>

                <!-- 会员管理 -->
                <section id="membersSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>会员管理</h2>
                        <button class="btn btn-primary btn-large" onclick="openAddMemberModal()">📱 新增会员</button>
                    </div>
                    
                    <div class="member-search-box">
                        <div class="search-input-group">
                            <label for="memberPhoneSearch" class="search-label">手机号查询：</label>
                            <input type="tel" id="memberPhoneSearch" class="form-control form-control-large" 
                                   placeholder="输入11位手机号码" maxlength="11">
                            <button class="btn btn-primary btn-large" onclick="searchMemberByPhone()">🔍 查询</button>
                        </div>
                    </div>
                    
                    <div id="memberDetails" class="member-details-card" style="display: none;">
                        <!-- 会员详细信息卡片 -->
                    </div>
                    
                    <div class="member-actions" id="memberActions" style="display: none;">
                        <button class="btn btn-success btn-large" onclick="openRechargeModal()">💰 充值</button>
                        <button class="btn btn-warning btn-large" onclick="openConsumeModal()">🛒 消费</button>
                        <button class="btn btn-info btn-large" onclick="viewTransactionHistory()">📋 交易记录</button>
                        <button class="btn btn-secondary btn-large" onclick="editMemberInfo()">✏️ 编辑资料</button>
                    </div>
                    
                    <div id="transactionHistory" class="transaction-history" style="display: none;">
                        <!-- 交易记录列表 -->
                    </div>
                </section>

                <!-- 病历管理 -->
                <section id="medicalSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>病历管理</h2>
                        <button class="btn btn-primary btn-large" onclick="openAddDiagnosisModal()">🏥 新增病历</button>
                    </div>
                    
                    <div class="medical-search-box">
                        <div class="search-input-group">
                            <label for="patientPhoneSearch" class="search-label">患者手机号：</label>
                            <input type="tel" id="patientPhoneSearch" class="form-control form-control-large" 
                                   placeholder="输入11位手机号码" maxlength="11">
                            <button class="btn btn-primary btn-large" onclick="searchPatientHistory()">🔍 查询病历</button>
                        </div>
                    </div>
                    
                    <div id="patientInfo" class="patient-info-card" style="display: none;">
                        <!-- 患者基本信息 -->
                    </div>
                    
                    <div id="medicalHistory" class="medical-history-list">
                        <!-- 病历记录列表 -->
                    </div>
                </section>

                <!-- 技师管理 -->
                <section id="therapistsSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>👨‍⚕️ 技师管理</h2>
                        <button class="btn btn-primary btn-large" onclick="openAddTherapistModal()">➕ 新增技师</button>
                    </div>
                    
                    <div class="therapist-search-box">
                        <div class="search-filters">
                            <div class="filter-group">
                                <label for="therapistStoreFilter" class="filter-label">🏪 所属门店：</label>
                                <select id="therapistStoreFilter" class="form-control form-control-large" onchange="searchTherapists()">
                                    <option value="">🔍 所有门店</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="therapistPositionFilter" class="filter-label">👔 职位筛选：</label>
                                <select id="therapistPositionFilter" class="form-control form-control-large" onchange="searchTherapists()">
                                    <option value="">🔍 所有职位</option>
                                    <option value="调理师">👨‍⚕️ 调理师</option>
                                    <option value="推拿师">🤲 推拿师</option>
                                    <option value="艾灸师">🔥 艾灸师</option>
                                    <option value="专家医师">👨‍⚕️ 专家医师</option>
                                    <option value="健康管理师">📋 健康管理师</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="therapistSearchInput" class="filter-label">🔍 技师搜索：</label>
                                <input type="text" id="therapistSearchInput" class="form-control form-control-large" 
                                       placeholder="输入技师姓名或专长..." onkeyup="searchTherapists()">
                            </div>
                            <div class="filter-buttons">
                                <button class="btn btn-primary btn-large" onclick="searchTherapists()">🔍 搜索</button>
                                <button class="btn btn-secondary btn-large" onclick="loadTherapists()">🔄 刷新</button>
                                <button class="btn btn-info btn-large" onclick="showTherapistStats()">📊 统计</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="therapistsList" class="therapists-grid">
                        <!-- 动态生成 -->
                    </div>
                    
                    <div id="therapistStatsModal" class="modal" style="display: none;">
                        <div class="modal-content modal-large">
                            <span class="close" onclick="closeTherapistStatsModal()">&times;</span>
                            <h2 class="modal-title">📊 技师统计</h2>
                            <div id="therapistStatsContent">
                                <!-- 动态生成 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 预约管理 -->
                <section id="appointmentsSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>📅 预约管理</h2>
                        <button class="btn btn-primary btn-large" onclick="openAddAppointmentModal()">➕ 新增预约</button>
                    </div>
                    
                    <div class="appointment-search-box">
                        <div class="search-filters">
                            <div class="filter-group">
                                <label for="appointmentDateFilter" class="filter-label">📅 预约日期：</label>
                                <input type="date" id="appointmentDateFilter" class="form-control form-control-large" 
                                       onchange="searchAppointments()">
                            </div>
                            <div class="filter-group">
                                <label for="appointmentStatusFilter" class="filter-label">📋 预约状态：</label>
                                <select id="appointmentStatusFilter" class="form-control form-control-large" 
                                        onchange="searchAppointments()">
                                    <option value="">🔍 所有状态</option>
                                    <option value="pending">⏳ 待确认</option>
                                    <option value="confirmed">✅ 已确认</option>
                                    <option value="completed">✨ 已完成</option>
                                    <option value="cancelled">❌ 已取消</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="appointmentSearchInput" class="filter-label">🔍 客户搜索：</label>
                                <input type="text" id="appointmentSearchInput" class="form-control form-control-large" 
                                       placeholder="输入客户姓名或电话..." onkeyup="searchAppointments()">
                            </div>
                            <div class="filter-buttons">
                                <button class="btn btn-primary btn-large" onclick="searchAppointments()">🔍 搜索</button>
                                <button class="btn btn-secondary btn-large" onclick="loadAppointments()">🔄 刷新</button>
                                <button class="btn btn-info btn-large" onclick="showAppointmentStats()">📊 统计</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="appointmentsList" class="appointments-grid">
                        <!-- 动态生成 -->
                    </div>
                    
                    <div id="appointmentStatsModal" class="modal" style="display: none;">
                        <div class="modal-content modal-large">
                            <span class="close" onclick="closeAppointmentStatsModal()">&times;</span>
                            <h2 class="modal-title">📊 预约统计</h2>
                            <div id="appointmentStatsContent">
                                <!-- 动态生成 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 门店管理 -->
                <section id="storesSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>门店管理</h2>
                        <button class="btn btn-primary btn-large" onclick="openAddStoreModal()">🏪 新增门店</button>
                    </div>
                    
                    <div class="store-search-box">
                        <div class="search-input-group">
                            <label for="storeSearchInput" class="search-label">门店搜索：</label>
                            <input type="text" id="storeSearchInput" class="form-control form-control-large" 
                                   placeholder="输入门店名称或地址..." onkeyup="searchStores()">
                            <button class="btn btn-primary btn-large" onclick="searchStores()">🔍 搜索</button>
                            <button class="btn btn-secondary btn-large" onclick="loadStores()">🔄 刷新</button>
                        </div>
                    </div>
                    
                    <div id="storesList" class="store-grid">
                        <!-- 动态生成 -->
                    </div>
                </section>

                <!-- 统计报表 -->
                <section id="statisticsSection" class="content-section" style="display: none;">
                    <h2>统计报表</h2>
                    
                    <div class="date-range">
                        <input type="date" id="statsStartDate" class="form-control">
                        <span>至</span>
                        <input type="date" id="statsEndDate" class="form-control">
                        <button class="btn btn-primary" onclick="loadStatistics()">查询</button>
                    </div>
                    
                    <div id="statisticsContent">
                        <!-- 动态生成 -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- 添加技师模态框 -->
    <div id="addTherapistModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddTherapistModal()">&times;</span>
            <h2 class="modal-title">➕ 新增技师</h2>
            <form id="addTherapistForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="therapistName" class="form-label-large">👤 技师姓名 *</label>
                        <input type="text" id="therapistName" class="form-control form-control-large" 
                               placeholder="请输入技师姓名" required>
                    </div>
                    <div class="form-group">
                        <label for="therapistStore" class="form-label-large">🏪 所属门店 *</label>
                        <select id="therapistStore" class="form-control form-control-large" required>
                            <option value="">请选择门店</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="therapistPosition" class="form-label-large">👔 职位 *</label>
                        <select id="therapistPosition" class="form-control form-control-large" required>
                            <option value="">请选择职位</option>
                            <option value="调理师">👨‍⚕️ 调理师</option>
                            <option value="推拿师">🤲 推拿师</option>
                            <option value="艾灸师">🔥 艾灸师</option>
                            <option value="专家医师">👨‍⚕️ 专家医师</option>
                            <option value="健康管理师">📋 健康管理师</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="therapistExperience" class="form-label-large">📅 从业年限 *</label>
                        <input type="number" id="therapistExperience" class="form-control form-control-large" 
                               min="1" placeholder="请输入从业年限" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="therapistSpecialties" class="form-label-large">💪 专业技能 *</label>
                    <input type="text" id="therapistSpecialties" class="form-control form-control-large" 
                           placeholder="如：颈肩调理，腰腿保健，经络疏通（多个用逗号分隔）" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="therapistPhone" class="form-label-large">📞 联系电话</label>
                        <input type="tel" id="therapistPhone" class="form-control form-control-large" 
                               placeholder="请输入联系电话">
                    </div>
                    <div class="form-group">
                        <label for="therapistHonors" class="form-label-large">🏆 荣誉称号</label>
                        <input type="text" id="therapistHonors" class="form-control form-control-large" 
                               placeholder="如：高级技师，金牌调理师等">
                    </div>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeAddTherapistModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">添加技师</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 编辑技师模态框 -->
    <div id="editTherapistModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditTherapistModal()">&times;</span>
            <h2>编辑技师</h2>
            <form id="editTherapistForm">
                <input type="hidden" id="editTherapistId">
                <div class="form-group">
                    <label for="editTherapistStore">所属门店 *</label>
                    <select id="editTherapistStore" class="form-control" required>
                        <option value="">请选择门店</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editTherapistName">姓名 *</label>
                    <input type="text" id="editTherapistName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="editTherapistPosition">职位 *</label>
                    <select id="editTherapistPosition" class="form-control" required>
                        <option value="调理师">调理师</option>
                        <option value="推拿师">推拿师</option>
                        <option value="艾灸师">艾灸师</option>
                        <option value="专家医师">专家医师</option>
                        <option value="健康管理师">健康管理师</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editTherapistExperience">从业年限 *</label>
                    <input type="number" id="editTherapistExperience" class="form-control" min="1" required>
                </div>
                <div class="form-group">
                    <label for="editTherapistSpecialties">专长 * (多个用逗号分隔)</label>
                    <input type="text" id="editTherapistSpecialties" class="form-control" placeholder="如：按摩，经络疏通，艾灸" required>
                </div>
                <div class="form-group">
                    <label for="editTherapistPhone">联系电话</label>
                    <input type="tel" id="editTherapistPhone" class="form-control">
                </div>
                <div class="form-group">
                    <label for="editTherapistHonors">荣誉称号</label>
                    <input type="text" id="editTherapistHonors" class="form-control">
                </div>
                <div class="form-group">
                    <label for="editTherapistStatus">状态</label>
                    <select id="editTherapistStatus" class="form-control">
                        <option value="active">在职</option>
                        <option value="inactive">离职</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block">更新</button>
            </form>
        </div>
    </div>

    <!-- 添加预约模态框 -->
    <div id="addAppointmentModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddAppointmentModal()">&times;</span>
            <h2 class="modal-title">➕ 新增预约</h2>
            <form id="addAppointmentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentCustomerName" class="form-label-large">👤 客户姓名 *</label>
                        <input type="text" id="appointmentCustomerName" class="form-control form-control-large" 
                               placeholder="请输入客户姓名" required>
                    </div>
                    <div class="form-group">
                        <label for="appointmentCustomerPhone" class="form-label-large">📞 联系电话 *</label>
                        <input type="tel" id="appointmentCustomerPhone" class="form-control form-control-large" 
                               placeholder="请输入手机号码" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentStore" class="form-label-large">🏪 选择门店 *</label>
                        <select id="appointmentStore" class="form-control form-control-large" 
                                onchange="loadStoreTherapistsForAppointment()" required>
                            <option value="">请选择门店</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="appointmentTherapist" class="form-label-large">👨‍⚕️ 选择技师 *</label>
                        <select id="appointmentTherapist" class="form-control form-control-large" required>
                            <option value="">请先选择门店</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="appointmentDate" class="form-label-large">📅 预约日期 *</label>
                        <input type="date" id="appointmentDate" class="form-control form-control-large" required>
                    </div>
                    <div class="form-group">
                        <label for="appointmentTime" class="form-label-large">🕐 预约时间 *</label>
                        <select id="appointmentTime" class="form-control form-control-large" required>
                            <option value="">请选择时间</option>
                            <option value="09:00">09:00</option>
                            <option value="10:00">10:00</option>
                            <option value="11:00">11:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="appointmentService" class="form-label-large">💆 服务项目 *</label>
                    <select id="appointmentService" class="form-control form-control-large" required>
                        <option value="">请选择服务项目</option>
                        <option value="推拿按摩">推拿按摩</option>
                        <option value="经络疏通">经络疏通</option>
                        <option value="艾灸调理">艾灸调理</option>
                        <option value="拔罐理疗">拔罐理疗</option>
                        <option value="颈肩调理">颈肩调理</option>
                        <option value="腰腿保健">腰腿保健</option>
                        <option value="养生保健">养生保健</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="appointmentNotes" class="form-label-large">📝 备注信息</label>
                    <textarea id="appointmentNotes" class="form-control form-control-large" rows="3" 
                              placeholder="健康状况、特殊要求等备注信息（可选）"></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeAddAppointmentModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">创建预约</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 编辑预约模态框 -->
    <div id="editAppointmentModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeEditAppointmentModal()">&times;</span>
            <h2 class="modal-title">✏️ 编辑预约</h2>
            <form id="editAppointmentForm">
                <input type="hidden" id="editAppointmentId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAppointmentCustomerName" class="form-label-large">👤 客户姓名 *</label>
                        <input type="text" id="editAppointmentCustomerName" class="form-control form-control-large" 
                               placeholder="请输入客户姓名" required>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentCustomerPhone" class="form-label-large">📞 联系电话 *</label>
                        <input type="tel" id="editAppointmentCustomerPhone" class="form-control form-control-large" 
                               placeholder="请输入手机号码" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAppointmentDate" class="form-label-large">📅 预约日期 *</label>
                        <input type="date" id="editAppointmentDate" class="form-control form-control-large" required>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentTime" class="form-label-large">🕐 预约时间 *</label>
                        <select id="editAppointmentTime" class="form-control form-control-large" required>
                            <option value="">请选择时间</option>
                            <option value="09:00">09:00</option>
                            <option value="10:00">10:00</option>
                            <option value="11:00">11:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="editAppointmentService" class="form-label-large">💆 服务项目 *</label>
                    <select id="editAppointmentService" class="form-control form-control-large" required>
                        <option value="">请选择服务项目</option>
                        <option value="推拿按摩">推拿按摩</option>
                        <option value="经络疏通">经络疏通</option>
                        <option value="艾灸调理">艾灸调理</option>
                        <option value="拔罐理疗">拔罐理疗</option>
                        <option value="颈肩调理">颈肩调理</option>
                        <option value="腰腿保健">腰腿保健</option>
                        <option value="养生保健">养生保健</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editAppointmentStatus" class="form-label-large">📋 预约状态</label>
                    <select id="editAppointmentStatus" class="form-control form-control-large">
                        <option value="pending">⏳ 待确认</option>
                        <option value="confirmed">✅ 已确认</option>
                        <option value="completed">✨ 已完成</option>
                        <option value="cancelled">❌ 已取消</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editAppointmentNotes" class="form-label-large">📝 备注信息</label>
                    <textarea id="editAppointmentNotes" class="form-control form-control-large" rows="3" 
                              placeholder="健康状况、特殊要求等备注信息"></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeEditAppointmentModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">更新预约</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 添加门店模态框 -->
    <div id="addStoreModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddStoreModal()">&times;</span>
            <h2 class="modal-title">🏪 新增门店</h2>
            <form id="addStoreForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="storeName" class="form-label-large">🏪 门店名称 *</label>
                        <input type="text" id="storeName" class="form-control form-control-large" 
                               placeholder="请输入门店名称" required>
                    </div>
                    <div class="form-group">
                        <label for="storeCode" class="form-label-large">🏷️ 门店编码</label>
                        <input type="text" id="storeCode" class="form-control form-control-large" 
                               placeholder="门店编码（可选）">
                    </div>
                </div>
                <div class="form-group">
                    <label for="storeAddress" class="form-label-large">📍 门店地址 *</label>
                    <input type="text" id="storeAddress" class="form-control form-control-large" 
                           placeholder="请输入详细地址" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="storePhone" class="form-label-large">📞 联系电话</label>
                        <input type="tel" id="storePhone" class="form-control form-control-large" 
                               placeholder="门店电话号码">
                    </div>
                    <div class="form-group">
                        <label for="storeManager" class="form-label-large">👔 店长姓名</label>
                        <input type="text" id="storeManager" class="form-control form-control-large" 
                               placeholder="店长姓名">
                    </div>
                </div>
                <div class="form-group">
                    <label for="storeHours" class="form-label-large">🕒 营业时间 *</label>
                    <input type="text" id="storeHours" class="form-control form-control-large" 
                           value="9:00-21:00" placeholder="如：9:00-21:00" required>
                </div>
                <div class="form-group">
                    <label for="storeDescription" class="form-label-large">📝 门店描述</label>
                    <textarea id="storeDescription" class="form-control form-control-large" rows="3" 
                              placeholder="门店特色、服务项目等描述信息（可选）"></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeAddStoreModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">添加门店</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 编辑门店模态框 -->
    <div id="editStoreModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeEditStoreModal()">&times;</span>
            <h2 class="modal-title">✏️ 编辑门店</h2>
            <form id="editStoreForm">
                <input type="hidden" id="editStoreId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editStoreName" class="form-label-large">🏪 门店名称 *</label>
                        <input type="text" id="editStoreName" class="form-control form-control-large" required>
                    </div>
                    <div class="form-group">
                        <label for="editStoreCode" class="form-label-large">🏷️ 门店编码</label>
                        <input type="text" id="editStoreCode" class="form-control form-control-large">
                    </div>
                </div>
                <div class="form-group">
                    <label for="editStoreAddress" class="form-label-large">📍 门店地址 *</label>
                    <input type="text" id="editStoreAddress" class="form-control form-control-large" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editStorePhone" class="form-label-large">📞 联系电话</label>
                        <input type="tel" id="editStorePhone" class="form-control form-control-large">
                    </div>
                    <div class="form-group">
                        <label for="editStoreManager" class="form-label-large">👔 店长姓名</label>
                        <input type="text" id="editStoreManager" class="form-control form-control-large">
                    </div>
                </div>
                <div class="form-group">
                    <label for="editStoreHours" class="form-label-large">🕒 营业时间 *</label>
                    <input type="text" id="editStoreHours" class="form-control form-control-large" required>
                </div>
                <div class="form-group">
                    <label for="editStoreDescription" class="form-label-large">📝 门店描述</label>
                    <textarea id="editStoreDescription" class="form-control form-control-large" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="editStoreStatus" class="form-label-large">🔄 门店状态</label>
                    <select id="editStoreStatus" class="form-control form-control-large">
                        <option value="active">✅ 营业中</option>
                        <option value="maintenance">🔧 装修中</option>
                        <option value="closed">❌ 已关闭</option>
                    </select>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeEditStoreModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">更新门店</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 新增会员模态框 -->
    <div id="addMemberModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddMemberModal()">&times;</span>
            <h2 class="modal-title">📱 新增会员</h2>
            <form id="addMemberForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="memberName" class="form-label-large">姓名 *</label>
                        <input type="text" id="memberName" class="form-control form-control-large" required>
                    </div>
                    <div class="form-group">
                        <label for="memberPhone" class="form-label-large">手机号 *</label>
                        <input type="tel" id="memberPhone" class="form-control form-control-large" 
                               placeholder="11位手机号码" maxlength="11" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="memberGender" class="form-label-large">性别</label>
                        <select id="memberGender" class="form-control form-control-large">
                            <option value="male">男</option>
                            <option value="female">女</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberAge" class="form-label-large">年龄</label>
                        <input type="number" id="memberAge" class="form-control form-control-large" min="1" max="120">
                    </div>
                </div>
                <div class="form-group">
                    <label for="memberAddress" class="form-label-large">联系地址</label>
                    <input type="text" id="memberAddress" class="form-control form-control-large">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="memberEmergencyName" class="form-label-large">紧急联系人</label>
                        <input type="text" id="memberEmergencyName" class="form-control form-control-large">
                    </div>
                    <div class="form-group">
                        <label for="memberEmergencyPhone" class="form-label-large">紧急联系电话</label>
                        <input type="tel" id="memberEmergencyPhone" class="form-control form-control-large">
                    </div>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeAddMemberModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">添加会员</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 充值模态框 -->
    <div id="rechargeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRechargeModal()">&times;</span>
            <h2 class="modal-title">💰 会员充值</h2>
            <form id="rechargeForm">
                <div class="member-info-display" id="rechargeModalMemberInfo">
                    <!-- 显示会员信息 -->
                </div>
                <div class="form-group">
                    <label for="rechargeAmount" class="form-label-large">充值金额 *</label>
                    <input type="number" id="rechargeAmount" class="form-control form-control-large" 
                           min="1" step="0.01" placeholder="请输入充值金额" required>
                </div>
                <div class="form-group">
                    <label for="rechargeMethod" class="form-label-large">支付方式</label>
                    <select id="rechargeMethod" class="form-control form-control-large">
                        <option value="CASH">现金</option>
                        <option value="WECHAT">微信支付</option>
                        <option value="ALIPAY">支付宝</option>
                        <option value="CARD">银行卡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="rechargeDescription" class="form-label-large">备注</label>
                    <input type="text" id="rechargeDescription" class="form-control form-control-large" 
                           placeholder="充值备注（可选）">
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeRechargeModal()">取消</button>
                    <button type="submit" class="btn btn-success btn-large">确认充值</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 消费模态框 -->
    <div id="consumeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeConsumeModal()">&times;</span>
            <h2 class="modal-title">🛒 会员消费</h2>
            <form id="consumeForm">
                <div class="member-info-display" id="consumeModalMemberInfo">
                    <!-- 显示会员信息 -->
                </div>
                <div class="form-group">
                    <label for="consumeAmount" class="form-label-large">消费金额 *</label>
                    <input type="number" id="consumeAmount" class="form-control form-control-large" 
                           min="1" step="0.01" placeholder="请输入消费金额" required>
                </div>
                <div class="form-group">
                    <label for="consumeServiceType" class="form-label-large">服务类型</label>
                    <select id="consumeServiceType" class="form-control form-control-large">
                        <option value="中医推拿">中医推拿</option>
                        <option value="艾灸调理">艾灸调理</option>
                        <option value="经络疏通">经络疏通</option>
                        <option value="拔罐刮痧">拔罐刮痧</option>
                        <option value="足疗按摩">足疗按摩</option>
                        <option value="其他服务">其他服务</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="consumeDescription" class="form-label-large">服务描述</label>
                    <input type="text" id="consumeDescription" class="form-control form-control-large" 
                           placeholder="服务详细描述（可选）">
                </div>
                <div class="discount-info" id="discountInfo">
                    <!-- 显示折扣信息 -->
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeConsumeModal()">取消</button>
                    <button type="submit" class="btn btn-warning btn-large">确认消费</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 新增病历模态框 -->
    <div id="addDiagnosisModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddDiagnosisModal()">&times;</span>
            <h2 class="modal-title">🏥 新增病历</h2>
            <form id="addDiagnosisForm">
                <div class="form-group">
                    <label for="diagnosisPatientPhone" class="form-label-large">患者手机号 *</label>
                    <input type="tel" id="diagnosisPatientPhone" class="form-control form-control-large" 
                           placeholder="11位手机号码" maxlength="11" required>
                </div>
                <div class="form-group">
                    <label for="diagnosisVisitDate" class="form-label-large">就诊日期 *</label>
                    <input type="date" id="diagnosisVisitDate" class="form-control form-control-large" required>
                </div>
                <div class="form-group">
                    <label for="diagnosisComplaint" class="form-label-large">主诉 *</label>
                    <textarea id="diagnosisComplaint" class="form-control form-control-large" rows="3" 
                              placeholder="患者主要症状和不适" required></textarea>
                </div>
                <div class="form-group">
                    <label for="diagnosisTcm" class="form-label-large">中医诊断 *</label>
                    <textarea id="diagnosisTcm" class="form-control form-control-large" rows="3" 
                              placeholder="中医诊断结果" required></textarea>
                </div>
                <div class="form-group">
                    <label for="diagnosisTreatment" class="form-label-large">治疗方案 *</label>
                    <textarea id="diagnosisTreatment" class="form-control form-control-large" rows="3" 
                              placeholder="治疗计划和建议" required></textarea>
                </div>
                <div class="form-group">
                    <label for="diagnosisTherapist" class="form-label-large">主治医师</label>
                    <select id="diagnosisTherapist" class="form-control form-control-large">
                        <option value="">请选择医师</option>
                        <!-- 动态加载医师列表 -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="diagnosisNotes" class="form-label-large">备注</label>
                    <textarea id="diagnosisNotes" class="form-control form-control-large" rows="2" 
                              placeholder="其他备注信息"></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="btn btn-secondary btn-large" onclick="closeAddDiagnosisModal()">取消</button>
                    <button type="submit" class="btn btn-primary btn-large">保存病历</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/member-management.js"></script>
    <script src="js/medical-management.js"></script>
</body>
</html>